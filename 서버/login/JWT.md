
# JWT (JSON Web Token)

- 장점
    1. 무상태:
        -  서버에 상태 정보를 저장하지 않기 때문에 확장성이 뛰어나다.
        - 서버 간에 세션을 공유할 필요가 없으므로 마이크로 서비스 아키텍처에서 특히 유용
    2. 유연성:
        - 클라인터 측에서 정보를 안전하게 유지하면서 다양한 데이터를 인코딩하여 전송함
        - 권한 사용자 정보등을 토큰에 포함할 수 있음.
    3. 보안 :
        - 서명된 토큰을 사용 -> 서버는 서명을 검증하여 토큰의 무결성을 확인한다.
        - 토큰 자체에 만료시간과 같은 보안 메커니즘을 포함할 수 있음
    4. 편의성 :
        - HTTP헤더에 포함되어 전송된다. 쿠키와 달리 CORS이슈가[CORS.md](CORS.md) 없음
        - API 서버 간의 통신에서도 쉽게 사용할 수 있음.

- 단점:
    1. 토큰 크기:
    - 데이터가 많아질 수록 네트워크 성능에 영향을 줄 수 있음
    2. 보안위험:
        - 클라이언트 측에서 보관 탈취될경우 보안문제 발생
        - 만료된 JWT를 공격하는 리플레이 공격에 취약
    3. 비갱신성:
        - 무상태이기 떄문에 강제로 만료시키거나 갱신할 방법이 없음
        - 그래서 만료시간 짧게 설정 후 리프레시 토큰을 통해 새롭게 인증하는 방식 사용
    4. 복잡성:
    - 관리와 보안을 위해 추가적인 인프라와 구현이 필요
    - 서명 키를 안전하게 관리하는 것이 중요



1. 클라이언트 -> 서버 : 사용자가 아이디와 비밀번호 혹은 소셜 로그인을 이용하여 서버에 로그인 요청을 보냅니다.
2. 서버는 비밀키를 사용해 json 객체를 암호화한 jwt 토큰을 발급한다.
3. JWT를 헤더에 담아 클라이언트에 보낸다.


로그인 이후
- JWT를 클라이언트가 로컬에 저장
- API호출을 할 때마다 header에 JWT를 실어 보낸다.
- 서버는 헤더를 매번확인하여 사용자가 신뢰할만한지 체크하고 인증이되면 API에 대한 응답을 보냄
- https://auth0.com/docs/get-started/applications/signing-algorithms

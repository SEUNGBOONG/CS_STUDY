
# 캐싱 전략은 웹서비스환경에서 빠른 성능과 만족도를 사용자에게 전달할 수 있다.
# 장점을 극대화 하기 위해 몇 가지의 전략들이 존재


### Redis 캐시 전략

Redis는 빠르고 유연한 인메모리 데이터 저장소로, 다양한 캐시 전략을 지원합니다. 주요 Redis 캐시 전략은 다음과 같습니다:

1. **Write-Through 캐시**
    - **설명**: 데이터가 캐시에 저장될 때마다 원본 데이터베이스에도 즉시 기록됩니다. 데이터 일관성을 유지하기 좋지만,
    - 쓰기 작업이 많을 경우 성능 저하가 발생할 수 있습니다.
    - **장점**: 데이터 일관성 유지, 원본 DB와의 동기화 문제 최소화.
    - **단점**: 쓰기 성능이 느려질 수 있음.

2. **Write-Behind (Write-Back) 캐시**
    - **설명**: 캐시에만 데이터를 기록하고, 일정 주기마다 또는 특정 조건에서만 원본 데이터베이스에 기록합니다. 성능이 매우 높아질 수 있지만, 캐시가 날아가면 데이터 손실 위험이 있습니다.
    - **장점**: 쓰기 성능이 높음.
    - **단점**: 데이터 손실 가능성, 복잡한 구현.

3. **Read-Through 캐시**
    - **설명**: 캐시에 데이터가 없으면 원본 데이터베이스에서 데이터를 읽어오고, 이 데이터를 캐시에 저장한 후 반환합니다. 주로 자주 읽히는 데이터에 유리합니다.
    - **장점**: 자주 조회되는 데이터에 대해 높은 성능.
    - **단점**: 초기 접근 시 지연 발생 가능.

4. **Cache-Aside (Lazy Loading)**
    - **설명**: 애플리케이션이 먼저 캐시를 조회하고, 캐시에 데이터가 없을 경우 원본 데이터베이스에서 데이터를 읽어온 후 캐시에 저장합니다. 캐시와 원본 데이터베이스의 일관성을 수동으로 관리해야 합니다.
    - **장점**: 자주 사용되지 않는 데이터에 대해 메모리 사용 최적화.
    - **단점**: 캐시 미스(cache miss) 시 성능 저하, 캐시와 데이터베이스 간 일관성 문제.

5. **Eviction 정책**
    - **설명**: 캐시의 메모리가 가득 찼을 때, 기존 데이터를 제거하는 정책입니다. Redis는 다양한 Eviction 정책을 제공합니다.
    - **주요 Eviction 정책**:
        - **LRU (Least Recently Used)**: 가장 오래 사용되지 않은 데이터를 제거.
        - **LFU (Least Frequently Used)**: 가장 적게 사용된 데이터를 제거.
        - **TTL (Time to Live)**: 설정된 TTL(Time to Live)이 만료된 데이터를 제거.
        - **Random**: 랜덤하게 데이터를 제거.

### 1차 캐시 (First-Level Cache)

1차 캐시는 주로 ORM(Object-Relational Mapping) 프레임워크에서 사용되는 개념으로, 데이터베이스에서 조회한 엔티티 객체를 세션 범위 내에서 캐싱하는 메커니즘입니다.

- **동작 방식**:
    - 데이터베이스로부터 조회한 엔티티는 1차 캐시에 저장됩니다.
    - 동일한 세션 내에서 동일한 엔티티를 다시 조회할 경우, 데이터베이스를 재조회하지 않고 1차 캐시에서 데이터를 반환합니다.
    - 세션이 종료되면 1차 캐시도 함께 사라집니다.

- **특징**:
    - **세션 범위**: 1차 캐시는 세션(또는 영속성 컨텍스트) 범위 내에서만 유효합니다.
    - **성능 최적화**: 동일한 엔티티에 대한 반복적인 데이터베이스 접근을 줄여 성능을 향상시킵니다.
    - **자동 관리**: 1차 캐시는 일반적으로 개발자가 명시적으로 관리할 필요 없이, ORM 프레임워크에서 자동으로 관리됩니다.

- **예시 (Hibernate)**:
    - Hibernate는 엔티티를 조회할 때 먼저 1차 캐시를 확인하고, 캐시에 없을 경우 데이터베이스에서 조회한 후 캐시에 저장합니다.
    - 동일한 트랜잭션 내에서 같은 엔티티를 다시 조회하면, 데이터베이스에 재조회하지 않고 1차 캐시에서 데이터를 반환합니다.
